CONFIG_DHRYSTONE_BESTEFFORT=1
CONFIG_DHRYSTONE_MICROSECOND=1
CONFIG_DHRYSTONE_OPTIMISED=2

PROGS=dhrystone.elf linpack.elf

include ../Makefile.bench

all: $(PROGS)

ifeq ($(CONFIG_DHRYSTONE_OPTIMISED),1)
CFLAGS_dhrystone_opt=-O1 -DDHRYSTONE_OPT="1"
endif
ifeq ($(CONFIG_DHRYSTONE_OPTIMISED),2)
CFLAGS_dhrystone_opt=-O2 -DDHRYSTONE_OPT="2"
endif
ifeq ($(CONFIG_DHRYSTONE_OPTIMISED),3)
CFLAGS_dhrystone_opt=-O3 -DDHRYSTONE_OPT="3"
endif
CFLAGS_dhrystone_besteffort=\
	$(CFLAGS_dhrystone_opt) -DREG=register
CFLAGS_dhrystone_groundrule=\
	-DCNNT -fno-inline
ifdef CONFIG_DHRYSTONE_BESTEFFORT
CFLAGS_dhrystone_basic=$(CFLAGS_dhrystone_besteffort)
else
CFLAGS_dhrystone_basic=$(CFLAGS_dhrystone_groundrule)
endif

ifdef CONFIG_DHRYSTONE_MICROSECOND
CFLAGS_dhrystone_time=-DCONFIG_DHRYSTONE_TIME_CLOCK
else
CFLAGS_dhrystone_time=-DCONFIG_DHRYSTONE_TIME_TIME
endif

CFLAGS_dhrystone=\
	$(CFLAGS_dhrystone_basic) \
	$(CFLAGS_dhrystone_time) \
	-I../../include

CFLAGS_linpack=\
	-I../../include

clean:
	@rm -f $(PROGS)
	@rm -f *.unstrip
	@rm -f *.o
	@rm -f *.debug
